function t(){this.label;this.f;this.e;this.c=[];this.d=function(){for(var b=0;b<this.c.length;b++)this.c[b].d(this)};this.o=function(b){var c=[this.e.s,this.e.j];return c[0].getTime()<=b.getTime()&&b.getTime()<=c[1].getTime()?!0:!1};this.q=function(b){for(var c in b)this.f==b[c].name&&(this.e=b[c])};this.r=function(){this.c.sort(function(b,c){var f=b.a.getTime(),d=c.a.getTime();return f<d?-1:f>d?1:0})}}
function u(b,c){function f(b){for(var a=0;a<m.length;a++)if(m[a]==b)return a;return-1}this.h;this.a;this.i;this.b=c.split(" ");this.label=b;this.description;var d="",e;for(e in this.b)d=1==this.b[e].length?d+("\u6bce\u9031"+this.b[e]+"\u66dc\u65e5 "):d+("\u7b2c"+this.b[e].charAt(1)+this.b[e].charAt(0)+"\u66dc\u65e5 ");this.h=d;this.l=function(){return this.h+" "+(this.a.getFullYear()+"/"+(1+this.a.getMonth())+"/"+this.a.getDate())};var m="\u65e5\u6708\u706b\u6c34\u6728\u91d1\u571f".split("");this.d=
function(b){for(var a=this.b,n=[],h=4;15>=h;h++)for(var c in a)for(var e=!1,d=0;5>d;d++){var p=new Date(2013,h-1,1),k=new Date(p);k.setTime(p.getTime()+864E5*((7+f(a[c].charAt(0))-p.getDay())%7)+6048E5*d);b.o(k)&&(e=!0);e&&k.setTime(k.getTime()+6048E5);k.getMonth()!=(h-1)%12||1<a[c].length&&d!=a[c].charAt(1)-1||n.push(k)}n.sort(function(a,b){var h=a.getTime(),n=b.getTime();return h<n?-1:h>n?1:0});b=new Date;for(var g in n)if(null==this.a&&b.getTime()<=n[g].getTime()+306E5){this.a=n[g];break}this.i=
n}}function v(b){function c(b,c){var e=b[c].split("/");return new Date(e[0],e[1]-1,e[2])}this.name=b[0];this.s=c(b,1);this.j=c(b,2)}
$(function(){function b(a){$.m("data/description.json",function(b){for(var h in b)m.push(b[h]);a();$("#accordion2").show()})}function c(a){a=l[a];var b=new Date;a.d();a.r();var h=$(window).height()/4,c="",e;for(e in a.c){var d,p=a.c[e],k;for(k in m)if(m[k].label==p.label){d=m[k];var g="",r="",g="",q=d.target,f;for(f in q){var s=q[f];r!=s.k&&(""!=r&&(g+="</ul>"),r=s.k,g+='<h4 class="initials">'+r+"</h4>",g+="<ul>");g+="<li>"+s.name+"</li>"}g+="</ul>";r=p.l();q=Math.ceil((p.a.getTime()-b.getTime())/
864E5);s="";s=0==q?"\u4eca\u65e5":1==q?"\u660e\u65e5":2==q?"\u660e\u5f8c\u65e5":q+"\u65e5\u5f8c";c+='<div class="accordion-group" id="accordion-group'+k+'"><div class="accordion-heading"><a class="accordion-toggle" style="height:'+h+'px" data-toggle="collapse" data-parent="#accordion" href="#collapse'+e+'"><div class="left-day">'+s+'</div><div class="accordion-table" ><img src="'+d.B.C+'"  /></div><h6><p class="text-left date">'+r+'</p></h6></a></div><div id="collapse'+e+'" class="accordion-body collapse"><div class="accordion-inner">'+
d.description+"<br />"+g+'<div class="targetDays"></div></div></div></div>'}}$("#accordion").n(c);$(".accordion-body").p("shown.bs.collapse",function(){var a=$("body"),b=$($(this).parent().get(0)).offset().top;a.v({scrollTop:b},50)});$(".accordion-body").p("hidden.bs.collapse",function(){0==$(".in").length&&$("html, body").scrollTop(0)})}function f(a){-1!=a&&localStorage.setItem("selected_area_name",l[a].label);-1!=a&&0==$("#accordion").children().length?b(function(){c(a)}):c(a)}function d(a){switch(a.code){case a.PERMISSION_DENIED:return"User denied the request for Geolocation.";
case a.POSITION_UNAVAILABLE:return"Location information is unavailable.";case a.TIMEOUT:return"The request to get user location timed out.";default:return"An unknown error occurred."}}var e=[],m=[],l=[];$("#select_area").g(function(a){a=$(a.target).t();f(a)});$("#gps_area").click(function(){navigator.geolocation.getCurrentPosition(function(a){$.m("area_candidate.php",{latitude:a.coords.latitude,longitude:a.coords.longitude},function(a){if(!0==a.result){a=a.w;var b;a:{for(b in l)if(l[b].label==a)break a;
b=-1}$("#select_area").t(b).g();alert(a+"\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3057\u305f")}else alert(a.reason)})},function(a){alert(d(a))})});null==localStorage.getItem("selected_area_name")&&($("#accordion2").show(),$("#collapseZero").u("in"));navigator.geolocation||$("#gps_area").A("display","none");(function(){$.get("data/area_days.csv",function(a){a=a.replace("/\u00a5r/gm","");a=a.split(String.fromCharCode(10));var b=a.shift().split(","),c;for(c in a){var d=a[c].split(","),f=new t;f.label=d[0];
f.f=d[1];l.push(f);for(c=2;6>c;c++){var m=new u(b[c],d[c]);f.c.push(m)}}$.get("data/center.csv",function(a){a=a.split(String.fromCharCode(10));for(var b in a)e.push(new v(a[b].split(",")));for(b in l)l[b].q(e);b=localStorage.getItem("selected_area_name");a=$("#select_area");var c;c='<option value="-1">\u672a\u9078\u629e</option>';for(var d in l){var f=l[d].label;c+='<option value="'+d+'" '+(b==f?'selected="selected"':"")+" >"+f+"</option>"}"function"==typeof dump&&dump(l);a.n(c);a.g()})})})()});